import{u as E,r,a as I,j as e,B as A,L as H,c as M,G as z,m as Y,C as W,N as S,S as T,R as $,b as q}from"./index-Dh5kSsyb.js";import{a as D,b as G}from"./api-UThzpGRo.js";import{C as g}from"./Card-CGnbGSXE.js";import{B as y}from"./Button-JUqdbHoz.js";function F({meal:t}){const m=E(),[a,p]=r.useState(!1),c=I(j=>j.cart.items.find(v=>v.id===t.idMeal)),x=c?c.quantity:0,i=()=>{m(M.addItem({id:t.idMeal,name:t.strMeal,price:9.99,image:t.strMealThumb,category:t.strCategory}))},u=()=>{m(M.addItem({id:t.idMeal}))},b=()=>{m(M.removeItem(t.idMeal))};return e.jsxs(g,{className:"h-100 border-0 overflow-hidden",style:{transition:"all 0.4s cubic-bezier(0.16, 1, 0.3, 1)",transform:a?"translateY(-8px)":"none",boxShadow:a?"0 12px 24px rgba(0,0,0,0.1)":"0 4px 12px rgba(0,0,0,0.05)"},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[e.jsxs("div",{className:"position-relative overflow-hidden",style:{height:"200px"},children:[e.jsx(g.Img,{variant:"top",src:t.strMealThumb,alt:t.strMeal,style:{height:"100%",width:"100%",objectFit:"cover",transform:a?"scale(1.05)":"scale(1)",transition:"all 0.6s cubic-bezier(0.16, 1, 0.3, 1)"}}),e.jsx(A,{bg:"light",text:"dark",className:"position-absolute top-0 end-0 m-2 px-2 py-1 rounded-pill",style:{transition:"all 0.3s ease",opacity:a?1:.8,transform:a?"translateY(0)":"translateY(-10px)"},children:t.strCategory})]}),e.jsxs(g.Body,{className:"d-flex flex-column p-3",children:[e.jsx(g.Title,{className:"mb-2 fw-bold",style:{minHeight:"48px",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.strMeal}),e.jsx("div",{className:"mt-auto",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("span",{className:"fs-4 fw-bold text-danger",children:"$9.99"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs(y,{as:H,to:`/food/${t.idMeal}`,variant:"outline-secondary",size:"sm",className:"d-flex align-items-center gap-1 px-3",style:{transform:a?"translateY(-2px)":"none",transition:"all 0.2s ease"},children:[e.jsx("i",{className:"bi bi-eye-fill"}),e.jsx("span",{children:"Details"})]}),x===0?e.jsxs(y,{variant:"danger",size:"sm",className:"d-flex align-items-center gap-1 px-3",onClick:i,style:{transform:a?"translateY(-2px)":"none",transition:"all 0.2s ease"},children:[e.jsx("i",{className:"bi bi-cart-plus-fill"}),e.jsx("span",{children:"Add"})]}):e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(y,{variant:"outline-danger",size:"sm",onClick:b,style:{transform:a?"translateY(-2px)":"none",transition:"all 0.2s ease"},children:e.jsx("i",{className:"bi bi-dash"})}),e.jsx("span",{className:"fw-bold px-1",children:x}),e.jsx(y,{variant:"danger",size:"sm",onClick:u,style:{transform:a?"translateY(-2px)":"none",transition:"all 0.2s ease"},children:e.jsx("i",{className:"bi bi-plus"})})]})]})]})})]})]})}function K(t){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z"},child:[]}]})(t)}function O(t){return z({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10.707 17.707 16.414 12l-5.707-5.707-1.414 1.414L13.586 12l-4.293 4.293z"},child:[]}]})(t)}function X(){const[t,m]=r.useState([]),[a,p]=r.useState([]),[c,x]=r.useState(!0),[i,u]=r.useState(""),[b,j]=r.useState(!1),[v,B]=r.useState(!0),d=r.useRef(null),f=r.useRef(null),L=Y(),N=()=>{if(d.current){const{scrollLeft:s,scrollWidth:n,clientWidth:h}=d.current;j(s>0),B(s<n-h-1)}},k=s=>{d.current&&d.current.scrollBy({left:s==="left"?-200:200,behavior:"smooth"})};return r.useEffect(()=>{(async()=>{const n=await D(),h=n.find(o=>o.strCategory==="Miscellaneous"),l=[...n.filter(o=>o.strCategory!=="Miscellaneous").sort((o,R)=>o.strCategory.localeCompare(R.strCategory))];h&&l.push(h),m(l);const w=new URLSearchParams(L.search).get("category");w&&l.some(o=>o.strCategory===w)?u(w):l.length>0&&u(l[0].strCategory)})()},[L.search]),r.useEffect(()=>{(async()=>{if(i){x(!0);const n=await G(i);p(n),x(!1)}})()},[i]),r.useEffect(()=>{const s=d.current;return s&&(s.addEventListener("scroll",N),N()),()=>{s&&s.removeEventListener("scroll",N)}},[t]),r.useEffect(()=>{if(f.current){const s=f.current.querySelectorAll(".food-card");if(s.length>0){const n=s[0].offsetHeight,h=parseInt(getComputedStyle(f.current).gap),C=Math.ceil(s.length/4),l=n*C+h*(C-1);f.current.style.minHeight=`${l}px`}}},[a]),e.jsxs(W,{className:"my-5 position-relative min-vh-100",children:[e.jsxs("div",{className:"text-center mb-5",children:[e.jsx("h1",{className:"display-4 fw-bold mb-3",children:"Our Menu"}),e.jsx("p",{className:"text-muted lead",children:"Discover delicious meals from every category"})]}),e.jsxs("div",{className:"position-relative",children:[b&&e.jsx("button",{onClick:()=>k("left"),className:"position-absolute start-0 top-50 translate-middle-y bg-white border-0 rounded-circle shadow-sm p-2 z-1",style:{left:"-15px"},"aria-label":"Scroll left",children:e.jsx(K,{size:24})}),e.jsx(S,{ref:d,variant:"pills",activeKey:i,onSelect:s=>u(s),className:"flex-nowrap mb-5 pb-2 overflow-auto scroll-hidden",style:{scrollbarWidth:"none",scrollBehavior:"smooth"},children:t.map(s=>e.jsx(S.Item,{className:"flex-shrink-0 px-1",children:e.jsx(S.Link,{eventKey:s.strCategory,className:"text-nowrap rounded-pill px-3 py-2",style:{fontWeight:500,color:i===s.strCategory?"white":"inherit",whiteSpace:"nowrap"},children:s.strCategory})},s.strCategory))}),v&&e.jsx("button",{onClick:()=>k("right"),className:"position-absolute end-0 top-50 translate-middle-y bg-white border-0 rounded-circle shadow-sm p-2 z-1",style:{right:"-15px"},"aria-label":"Scroll right",children:e.jsx(O,{size:24})})]}),e.jsxs("div",{ref:f,className:"position-relative",children:[c?e.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center bg-white",style:{zIndex:1},children:e.jsxs("div",{className:"text-center",children:[e.jsx(T,{animation:"border",variant:"danger",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-3 text-muted",children:"Loading delicious meals..."})]})}):null,e.jsxs("div",{className:`transition-opacity ${c?"opacity-50":"opacity-100"}`,children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h2",{className:"mb-0",children:i}),e.jsxs("small",{className:"text-muted",children:[a.length," items"]})]}),e.jsx($,{xs:1,md:2,lg:3,xxl:4,className:"g-4",children:a.map(s=>e.jsx(q,{className:"food-card",children:e.jsx(F,{meal:s})},s.idMeal))}),a.length===0&&!c&&e.jsxs("div",{className:"text-center py-5 my-5",children:[e.jsx("h4",{className:"text-muted",children:"No meals found in this category"}),e.jsx("p",{children:"Try selecting a different category"})]})]})]})]})}export{X as default};
